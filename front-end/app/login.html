<!DOCTYPE html>
<html lang="en">

<head>
   <meta charset="utf-8">
   <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
   <meta name="description" content="Bootstrap Admin App + jQuery">
   <meta name="keywords" content="app, responsive, jquery, bootstrap, dashboard, admin">
   <title>FFCS - Course Registration</title>
   <!-- =============== VENDOR STYLES ===============-->
   <!-- FONT AWESOME-->
   <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
   <!-- =============== BOOTSTRAP STYLES ===============-->
   <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
   <link rel="stylesheet" href="http://serverlessffcsfe.s3-website-us-east-1.amazonaws.com/app/vendor/whirl/dist/whirl.css" id="maincss">
   <!-- =============== APP STYLES ===============-->
   <style>
     .lds-spinner {
      color: official;
      display: inline-block;
      position: relative;
      width: 30px;
      height: 30px;
    }
    .lds-spinner div {
      transform-origin: 28px 14px;
      animation: lds-spinner 1.2s linear infinite;
    }
    .lds-spinner div:after {
      content: " ";
      display: block;
      position: absolute;
      top: 0px;
      left: 25px;
      width: 2px;
      height: 5px;
      border-radius: 2%;
      background: #fff;
    }
    .lds-spinner div:nth-child(1) {
      transform: rotate(0deg);
      animation-delay: -1.1s;
    }
    .lds-spinner div:nth-child(2) {
      transform: rotate(30deg);
      animation-delay: -1s;
    }
    .lds-spinner div:nth-child(3) {
      transform: rotate(60deg);
      animation-delay: -0.9s;
    }
    .lds-spinner div:nth-child(4) {
      transform: rotate(90deg);
      animation-delay: -0.8s;
    }
    .lds-spinner div:nth-child(5) {
      transform: rotate(120deg);
      animation-delay: -0.7s;
    }
    .lds-spinner div:nth-child(6) {
      transform: rotate(150deg);
      animation-delay: -0.6s;
    }
    .lds-spinner div:nth-child(7) {
      transform: rotate(180deg);
      animation-delay: -0.5s;
    }
    .lds-spinner div:nth-child(8) {
      transform: rotate(210deg);
      animation-delay: -0.4s;
    }
    .lds-spinner div:nth-child(9) {
      transform: rotate(240deg);
      animation-delay: -0.3s;
    }
    .lds-spinner div:nth-child(10) {
      transform: rotate(270deg);
      animation-delay: -0.2s;
    }
    .lds-spinner div:nth-child(11) {
      transform: rotate(300deg);
      animation-delay: -0.1s;
    }
    .lds-spinner div:nth-child(12) {
      transform: rotate(330deg);
      animation-delay: 0s;
    }
    @keyframes lds-spinner {
      0% {
        opacity: 1;
      }
      100% {
        opacity: 0;
      }
    }
   </style>
   <link rel="stylesheet" href="http://serverlessffcsfe.s3-website-us-east-1.amazonaws.com/app/css/app.css" id="maincss">
</head>

<body>
   <div class="wrapper">
      <div class="block-center mt-xl wd-xl">
         <!-- START panel-->
         <div class="panel panel-dark panel-flat">
            <div class="panel-heading text-center">
               COURSE REGISTRATION LOGIN
            </div>
            <div class="panel-body">
               <p class="text-center pv">SIGN IN TO CONTINUE.</p>
               <form role="form" data-parsley-validate="" novalidate="" class="mb-lg">
                  <div class="form-group has-feedback">
                     <input id="exampleInputEmail1" type="email" placeholder="Registration number" autocomplete="off" required class="form-control">
                     <span class="fa fa-envelope form-control-feedback text-muted"></span>
                  </div>
                  <div class="form-group has-feedback">
                     <input id="exampleInputPassword1" type="password" placeholder="Password" required class="form-control">
                     <span class="fa fa-lock form-control-feedback text-muted"></span>
                  </div>
                   <div style = "height:40px;font-size: 15px" id = "login-box" onclick = "login()" class="btn btn-block btn-primary mt-lg"><font color = "white">Login</font></div>
               </form>
               
            </div>
         </div>
         <!-- END panel-->
         <div class="p-lg text-center">
            <span>Course registration</span>
            <br>
            <span>VIT University, Vellore</span>
         </div>
      </div>
   </div>
   <!-- =============== VENDOR SCRIPTS ===============-->
   <!-- MODERNIZR-->
   <script src="https://cdnjs.cloudflare.com/ajax/libs/modernizr/2.8.3/modernizr.min.js"></script>
   <!-- JQUERY-->
   <script   src="https://code.jquery.com/jquery-3.3.1.min.js"   integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8="   crossorigin="anonymous"></script>
   <!-- BOOTSTRAP-->
   <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
   <!-- =============== APP SCRIPTS ===============-->
   <script src="http://serverlessffcsfe.s3-website-us-east-1.amazonaws.com/app/js/app.js"></script>

   <script>
    localStorage.clear();
    function login() {
        $('#login-box').html('<div style = "margin-right: 12%" class="lds-spinner"><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div></div>');
        const data = {
          registration_number: $('#exampleInputEmail1').val(),
          password: $('#exampleInputPassword1').val(),
        };
        $.ajax({
          type: 'POST',
          data: JSON.stringify(data),
          contentType: 'application/json',
          url: 'https://v8h67ad5b3.execute-api.us-east-1.amazonaws.com/dev/login',
          crossDomain: true,
          success: function(data) {
            if (data.errorMessage === '404') {
              $('#login-box').html('<font color = "white">Login</font>');
              alert('Your Credentials are wrong');
            } else if (data.errorMessage) {
              $('#login-box').html('<font color = "white">Login</font>');
              alert('Something went wrong! Try again Later!');
            } else {
              localStorage.setItem('token', data.token);
              window.location.href="./dashboard";
            }
          },
          error: function(data) {
            console.log('error');
            console.log(data);
          }
      });
    }
   </script>
</body>

</html>